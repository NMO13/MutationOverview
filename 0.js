webpackJsonp([0,4],{280:function(t,e,r){"use strict";function n(t,e){return e?new g(t,r.i(m.a)(e)):new g(t,r.i(m.b)())}function i(t,e,n){return new g(t,r.i(m.a)(r.i(m.c)(e,n)))}function o(t,e){return t.map(function(t){var r={};return e.forEach(function(e,n){return r[e]=t[n]}),r})}function s(t,e){return t.map(function(t){return e.map(function(e){return t[e]})})}function u(t,e,n,i,o){void 0===o&&(o={});var s=r.i(f.a)(r.i(d.a)(),{columns:t,size:[e.length,t.length]},o),u=o.rowassigner||r.i(l.d)(),a=function(){var t={rowIds:u(e),rows:e,objs:n,data:i};return Promise.resolve(t)};return new g(s,r.i(m.a)(a))}function a(t,e){void 0===e&&(e={});var n=t.map(function(t){return t[0]}),i=t[0].slice(1),s=t.slice(1).map(function(t){return t.slice(1)}),a=i.map(function(t,e){return{name:t,column:t,value:r.i(h.a)(s.map(function(t){return t[e]}))}}),c=s.map(function(t){return a.map(function(e,r){return e.value.type===h.f||e.value.type===h.g?parseFloat(t[r]):t[r]})}),p=o(c,i);return u(a,n,p,c,e)}function c(t,e){void 0===e&&(e={});var n=e.keyProperty||"_id",i=t.map(function(t,e){return String(t[n]||e)}),o=Object.keys(t[0]),a=t,c=s(a,o);return u(o.map(function(t,e){return{name:t,column:t,value:r.i(h.a)(c.map(function(t){return t[e]}))}}),i,a,c,e)}Object.defineProperty(e,"__esModule",{value:!0});var p=r(8),f=r(18),_=r(288),l=r(291),h=r(289),d=r(342),y=r(341),v=r(344),m=r(345);e.create=n,e.wrapObjects=i,e.asTableFromArray=a,e.asTable=c;var g=function(t){function e(e,r){var n=t.call(this,null)||this;return n.desc=e,n.loader=r,e.columns.forEach(function(t){return t.column=t.column||t.name}),n.root=n,n.vectors=e.columns.map(function(t,e){return new v.a(n,e,t)}),n}return p.c(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return r.i(l.f)(this.desc.idtype||this.desc.rowtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=r.i(_.c)()),r.i(_.f)(t).filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return p.a(this,void 0,void 0,function(){return p.b(this,function(n){switch(n.label){case 0:return[4,this.colData(this.col(e).column,r.i(_.d)(t))];case 1:return[2,n.sent()[0]]}})})},e.prototype.queryView=function(t,n){return new e(this.desc,r.i(m.a)(this.loader.view(this.desc,t,n)))},e.prototype.data=function(t){return void 0===t&&(t=r.i(_.c)()),this.loader.data(this.desc,r.i(_.f)(t))},e.prototype.colData=function(t,e){return void 0===e&&(e=r.i(_.c)()),this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){return void 0===e&&(e=r.i(_.c)()),this.loader.col(this.desc,t,r.i(_.f)(e))},e.prototype.objects=function(t){return void 0===t&&(t=r.i(_.c)()),this.loader.objs(this.desc,r.i(_.f)(t))},e.prototype.rows=function(t){return void 0===t&&(t=r.i(_.c)()),this.loader.rows(this.desc,r.i(_.f)(t))},e.prototype.rowIds=function(t){return void 0===t&&(t=r.i(_.c)()),this.loader.rowIds(this.desc,r.i(_.f)(t))},e.prototype.ids=function(t){return void 0===t&&(t=r.i(_.c)()),this.rowIds(t)},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e}(y.a);e.default=g},283:function(t,e,r){"use strict";function n(t,e){return"function"==typeof e?new h(t,r.i(l.a)(e)):new h(t,e||r.i(l.b)())}function i(t,e,n,i){void 0===i&&(i={});var o=Array.isArray(e)?e:t.map(function(t){return t[0]}).slice(1),f=n||t[0].slice(1);"object"==typeof e&&(i=e),i=i||{};var _=Array.isArray(e)?t:t.slice(1).map(function(t){return t.slice(1)}),l=r.i(u.a)([].concat.apply([],_));l.type===u.f?_=_.map(function(t){return t.map(parseFloat)}):l.type===u.f&&(_=_.map(function(t){return t.map(parseInt)}));var d=r.i(a.a)(r.i(p.a)(),{size:[o.length,f.length],value:l},i),y=i.rowassigner||r.i(c.d)(),v=i.rowassigner||r.i(c.d)();return new h(d,{rowIds:function(t,e){return Promise.resolve(y(e.filter(o)))},colIds:function(t,e){return Promise.resolve(v(e.filter(f)))},ids:function(t,e){var n=y(e.dim(0).filter(o)),i=v(e.dim(1).filter(f));return Promise.resolve(r.i(s.h)(n,i))},at:function(t,e,r){return Promise.resolve(_[e][r])},rows:function(t,e){return Promise.resolve(e.filter(o))},cols:function(t,e){return Promise.resolve(e.filter(f))},data:function(t,e){return Promise.resolve(e.filter(_))}})}Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),s=r(288),u=r(289),a=r(18),c=r(291),p=r(332),f=r(323),_=r(336),l=r(337);e.create=n,e.asMatrix=i;var h=function(t){function e(e,n){var i=t.call(this,null)||this;return i.desc=e,i.loader=n,i.root=i,i.valuetype=e.value,i.rowtype=r.i(c.f)(e.rowtype),i.coltype=r.i(c.f)(e.coltype),i._producttype=r.i(c.h)(i.rowtype,i.coltype),i.t=new _.a(i),i}return o.c(e,t),Object.defineProperty(e.prototype,"producttype",{get:function(){return this._producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype,this.coltype]},enumerable:!0,configurable:!0}),e.prototype.at=function(t,e){return this.loader.at(this.desc,t,e)},e.prototype.data=function(t){return void 0===t&&(t=r.i(s.c)()),this.loader.data(this.desc,r.i(s.f)(t))},e.prototype.ids=function(t){return void 0===t&&(t=r.i(s.c)()),this.loader.ids(this.desc,r.i(s.f)(t))},e.prototype.cols=function(t){return void 0===t&&(t=r.i(s.c)()),this.loader.cols(this.desc,r.i(s.f)(t))},e.prototype.colIds=function(t){return void 0===t&&(t=r.i(s.c)()),this.loader.colIds(this.desc,r.i(s.f)(t))},e.prototype.rows=function(t){return void 0===t&&(t=r.i(s.c)()),this.loader.rows(this.desc,r.i(s.f)(t))},e.prototype.rowIds=function(t){return void 0===t&&(t=r.i(s.c)()),this.loader.rowIds(this.desc,r.i(s.f)(t))},e.prototype.hist=function(e,n,i){return void 0===n&&(n=r.i(s.c)()),void 0===i&&(i=0),!this.loader.numericalHist||this.valuetype.type!==u.f&&this.valuetype.type!==u.g?t.prototype.hist.call(this,e,n,i):this.loader.numericalHist(this.desc,r.i(s.f)(n),e)},e.prototype.stats=function(e){return void 0===e&&(e=r.i(s.c)()),!this.loader.numericalStats||this.valuetype.type!==u.f&&this.valuetype.type!==u.g?t.prototype.stats.call(this,e):this.loader.numericalStats(this.desc,r.i(s.f)(e))},e.prototype.statsAdvanced=function(e){return void 0===e&&(e=r.i(s.c)()),!this.loader.numericalStats||this.valuetype.type!==u.f&&this.valuetype.type!==u.g?t.prototype.statsAdvanced.call(this,e):this.loader.numericalStats(this.desc,r.i(s.f)(e))},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=r.i(s.c)()),void 0===e&&(e={}),this.loader.heatmapUrl?this.loader.heatmapUrl(this.desc,t,e):null},e}(f.a);e.default=h},284:function(t,e,r){"use strict";function n(t){return new m(t,r.i(y.a)())}function i(t,e,n,i){return new m(t,r.i(y.b)(e,n,i))}function o(t,e,n){void 0===n&&(n={});var i=r.i(a.a)(r.i(h.a)(),{size:0,groups:e.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}}),ngroups:e.groups.length},n),o=n.rowassigner||r.i(p.d)();return new m(i,r.i(y.b)(t,o(t),e))}function s(t){function e(){return Promise.all([t.groups(),t.ids(),t.names()]).then(function(t){return t[0].groups.forEach(function(t,e){return n[e].size=t.length}),{range:t[0],rowIds:t[1],rows:t[2]}})}if(t.valuetype.type!==f.d)throw new Error("invalid vector value type: "+t.valuetype.type);var r=function(t){if("string"==typeof t)return{name:t,color:"gray",size:NaN};var e=t;return{name:e.name,color:e.color||"gray",size:NaN}},n=t.desc.value.categories.map(r),i={id:t.desc.id+"-s",type:"stratification",name:t.desc.name+"-s",fqname:t.desc.fqname+"-s",description:t.desc.description,idtype:t.idtype.id,ngroups:n.length,groups:n,size:t.length,creator:t.desc.creator,ts:t.desc.ts};return new m(i,e)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(8),a=r(18),c=r(288),p=r(291),f=r(289),_=r(327),l=r(299),h=r(338),d=r(324),y=r(340),v=r(339);e.create=n,e.wrap=i,e.asStratification=o,e.wrapCategoricalVector=s;var m=function(t){function e(e,r){var n=t.call(this,e)||this;return n.loader=r,n}return u.c(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return r.i(p.f)(this.desc.idtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new d.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return u.a(this,void 0,void 0,function(){var t;return u.b(this,function(e){switch(e.label){case 0:return t=l.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){var t=this;return this._v||(this._v=this.loader(this.desc).then(function(e){return new v.a(t,e.range)})),this._v},e.prototype.origin=function(){return"origin"in this.desc?r.i(_.a)(this.desc.origin):Promise.reject("no origin specified")},e.prototype.range=function(){return u.a(this,void 0,void 0,function(){return u.b(this,function(t){switch(t.label){case 0:return[4,this.loader(this.desc)];case 1:return[2,t.sent().range]}})})},e.prototype.idRange=function(){return u.a(this,void 0,void 0,function(){var t,e,r;return u.b(this,function(n){switch(n.label){case 0:return[4,this.loader(this.desc)];case 1:return t=n.sent(),e=t.rowIds.dim(0),r=t.range,[2,e.preMultiply(r,this.dim[0])]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(c.c)()),u.a(this,void 0,void 0,function(){var e,n;return u.b(this,function(i){switch(i.label){case 0:return n=(e=r.i(c.f)(t)).filter,[4,this.loader(this.desc)];case 1:return[2,n.apply(e,[i.sent().rows,this.dim])]}})})},e.prototype.ids=function(t){return void 0===t&&(t=r.i(c.c)()),u.a(this,void 0,void 0,function(){return u.b(this,function(e){switch(e.label){case 0:return[4,this.loader(this.desc)];case 1:return[2,e.sent().rowIds.preMultiply(r.i(c.f)(t),this.dim)]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.desc.ngroups},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.size()]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e}(f.c);e.default=m},286:function(t,e,r){"use strict";function n(t){return"function"==typeof t.loader?new h(t,t.loader):new h(t,r.i(l.a)())}function i(t,e,n,i){return new h(t,r.i(l.b)(e,n,i))}function o(t,e,n){void 0===n&&(n={});var i=r.i(u.a)(r.i(f.a)(),{size:e.length,value:r.i(p.a)(e)},n),o=n.rowassigner||r.i(c.d)();return new h(i,r.i(l.b)(t,o(t),e))}Object.defineProperty(e,"__esModule",{value:!0});var s=r(8),u=r(18),a=r(288),c=r(291),p=r(289),f=r(346),_=r(305),l=r(349);e.create=n,e.wrap=i,e.asVector=o;var h=function(t){function e(e,r){var n=t.call(this,null)||this;return n.desc=e,n.loader=r,n.root=n,n}return s.c(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return r.i(c.f)(this.desc.idtype)},enumerable:!0,configurable:!0}),e.prototype.load=function(){return this.loader(this.desc)},e.prototype.at=function(t){return s.a(this,void 0,void 0,function(){return s.b(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return[2,e.sent().data[t]]}})})},e.prototype.data=function(t){return void 0===t&&(t=r.i(a.c)()),s.a(this,void 0,void 0,function(){var e,n;return s.b(this,function(i){switch(i.label){case 0:return[4,this.load()];case 1:return e=i.sent(),n=r.i(a.f)(t).filter(e.data,this.dim),this.valuetype.type===p.f||this.valuetype.type===p.g?[2,r.i(p.h)(n,this.valuetype)]:[2,n]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(a.c)()),s.a(this,void 0,void 0,function(){var e;return s.b(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return e=n.sent(),[2,r.i(a.f)(t).filter(e.rows,this.dim)]}})})},e.prototype.ids=function(t){return void 0===t&&(t=r.i(a.c)()),s.a(this,void 0,void 0,function(){var e;return s.b(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return e=n.sent(),[2,e.rowIds.preMultiply(r.i(a.f)(t),this.dim)]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},e.prototype.sort=function(t,e){return s.a(this,void 0,void 0,function(){var n,i;return s.b(this,function(o){switch(o.label){case 0:return[4,this.data()];case 1:return n=o.sent(),i=r.i(u.l)(n,t,e),[2,this.view(r.i(a.d)(i))]}})})},e.prototype.filter=function(t,e){return s.a(this,void 0,void 0,function(){var n,i;return s.b(this,function(o){switch(o.label){case 0:return[4,this.data()];case 1:return n=o.sent(),i=r.i(u.m)(n,t,e),[2,this.view(r.i(a.d)(i))]}})})},e.prototype.persist=function(){return this.desc.id},e}(_.a);e.default=h},288:function(t,e,r){"use strict";function n(t){return void 0===t&&(t=null),null===t?r.i(_.a)():t instanceof _.b?t:Array.isArray(t)?Array.isArray(t[0])?o.apply(void 0,t):o(t):r.i(l.a)(Array.from(arguments).map(String).join(","))}function i(){if(0===arguments.length)return r.i(_.a)();var t=new _.b;return Array.isArray(arguments[0])?Array.from(arguments).forEach(function(e,r){0!==e.length&&t.dim(r).setSlice(e[0],e[1],e[2])}):"[object Object]"===Object.prototype.toString.call(arguments[0])?Array.from(arguments).forEach(function(e,r){t.dim(r).setSlice(e.from,e.to,e.step)}):"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function o(){if(0===arguments.length)return r.i(_.a)();if(Array.isArray(arguments[0])&&arguments[0][0]instanceof c.a)return new _.b(arguments[0]);if(Array.isArray(arguments[0])){var t=new _.b;return Array.from(arguments).forEach(function(e,r){e instanceof c.a?t.dims[r]=e:t.dim(r).setList(e)}),t}if("number"==typeof arguments[0]){var e=new _.b;return e.dim(0).setList(Array.from(arguments)),e}return arguments[0]instanceof c.a?new _.b(Array.from(arguments)):r.i(_.c)()}function s(){if(0===arguments.length)return r.i(_.a)();var t=arguments[0];return Array.isArray(t)||(t=Array.from(arguments)),new _.b(t.map(function(t){return t.dim(0)}))}function u(t){return new f.a("unnamed","gray",t)}function a(t,e){return new p.a(t,e)}var c=r(290),p=r(296),f=r(298),_=r(297),l=r(311);r.d(e,"l",function(){return _.b}),r.d(e,"c",function(){return _.a}),r.d(e,"g",function(){return _.c}),r.d(e,"e",function(){return c.a}),r.d(e,"a",function(){return p.a}),r.d(e,"i",function(){return f.a}),e.f=n,e.k=i,e.d=o,e.h=s,e.b=u,e.j=a},289:function(t,e,r){"use strict";function n(t){if(0===t.length||0===t[0].length)return[];for(var e=t[0].map(function(t){return[t]}),r=1;r<t.length;++r)t[r].forEach(function(t,r){return e[r].push(t)});return e}function i(t,e){if(Array.isArray(t)){var r=t;if(r.indexOf(e)>=0)return r.map(function(t){return t===e?NaN:t})}return t===e?NaN:t}function o(t,e){return e.type===m&&"missing"in e?i(t,e.missing):e.type===m||e.type===v?i(t,null):t}function s(t,e,n){void 0===n&&(n={});var i=r.i(f.a)({skipEmptyCategories:!0,colors:["gray"],labels:null,name:"Partitioning"},n),o=e.map(function(t,e){return{name:i.labels?i.labels[e]:t.toString(),color:i.colors[Math.min(e,i.colors.length-1)],indices:[]}});t.forEach(function(t,r){var n=e.indexOf(t);n>=0&&o[n].indices.push(r)}),i.skipEmptyCategories&&(o=o.filter(function(t){return t.indices.length>0}));var s=o.map(function(t){return new h.i(t.name,t.color,h.e.from(t.indices))});return r.i(h.j)(i.name,s)}function u(t){return t-parseFloat(t)+1>=0}function a(t){if(0===t.length)return{type:"string"};var e=t[0];if("number"==typeof e||u(e))return{type:v,range:r.i(l.a)(t.map(parseFloat))};var n=new Set(t);return n.size<.2*t.length||n.size<8?{type:"categorical",categories:Array.from(n.values())}:{type:"string"}}function c(t){void 0===t&&(t="localData");var e=r.i(f.e)(t);return{type:"default",id:e,name:e,fqname:e,description:"",creator:r.i(d.a)(),ts:Date.now()}}var p=r(8),f=r(18),_=r(291),l=r(299),h=r(288),d=r(317);r.d(e,"d",function(){return y}),r.d(e,"f",function(){return v}),r.d(e,"g",function(){return m}),r.d(e,"c",function(){return g}),r.d(e,"e",function(){return b}),e.j=n,e.h=o,e.i=s,e.a=a,e.b=c;var y="categorical",v="real",m="int",g=function(t){function e(e){var r=t.call(this)||this;return r.desc=e,r}return p.c(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(h.c)()),Promise.resolve(r.i(h.g)())},e.prototype.idView=function(t){return Promise.resolve(this)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(t){return this},e.prototype.toString=function(){return this.persist()},e}(_.e),b=function(t){function e(e){return t.call(this,e)||this}return p.c(e,t),e}(g)},290:function(t,e,r){"use strict";function n(t,e){return t-e}var i=r(300),o=r(295),s=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([i.a.all()])},t.single=function(e){return new t([i.a.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[i.a.single(t[0])];for(var e=[],r=t.slice(1).map(function(e,r){return e-t[r]}),n=0,o=1,s=0;o<t.length;){for(;r[n]===r[o-1]&&o<t.length;)o++;if(o===n+1)e.push(i.a.single(t[n]));else if(1===r[n])e.push(i.a.range(t[n],t[o-1]+r[n],r[n]));else for(s=n;s<o;s++)e.push(i.a.single(t[s]));n=o,o+=1}for(;n<t.length;)e.push(i.a.single(t[n++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?i.a.parse(t.toString()):"number"==typeof t?i.a.single(t):Array.isArray(t)?new i.a(t[0],t[1],t[2]):t}for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(n=this.arr).push.apply(n,e.map(t));var n},t.prototype.pushSlice=function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.arr.push(new i.a(t,e,r))},t.prototype.pushList=function(e){(r=this.arr).push.apply(r,t.compress(e));var r},t.prototype.setSlice=function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.arr.length=0,this.pushSlice(t,e,r)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?i.a.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var r=this.arr.slice(),n=1;n<e;++n)r.push.apply(r,this.arr);return new t(r)},t.prototype.preMultiply=function(e,r){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var n=this.iter(r).asList(),i=function(t){var e=t.iter(n.length),r=[];return e.forEach(function(t){t>=0&&t<n.length&&r.push(n[t])}),t.fromLike(r)};if("function"==typeof e.fromLikeComposite){var o=e;return o.fromLikeComposite(o.groups.map(i))}return i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var r=this.iter(e).asList();return t.iter(e).forEach(function(t){r.indexOf(t)<0&&r.push(t)}),t.fromLike(r.sort(n))},t.prototype.intersect=function(e,r){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var i=this.iter(r).asList(),o=e.iter(r),s=[];return o.forEach(function(t){i.indexOf(t)>=0&&s.push(t)}),e.fromLike(s.sort(n))},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,r){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var i=this.iter(r),o=e.iter(r).asList(),s=[];return i.forEach(function(t){o.indexOf(t)<0&&s.push(t)}),t.from(s.sort(n))},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var r=this.arr[0].size(e),n=0,i=r,o=this.arr.length-1;i<t&&n<o;)n++,r=this.arr[n].size(e),i+=r;return n>=this.arr.length?-1:this.arr[n].invert(t-i+r,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof Range)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=Array.from(arguments);return 0===t.length?[]:t.map(function(t,r){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,r){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var n;if(this.isIdentityRange){var i=this.arr[0].to;n=function(t,e){t>=0&&t<i&&e.push(t)}}else{var o=this.iter().asList();n=function(t,e){var r=o.indexOf(t);r>=0&&e.push(r)}}if("function"==typeof e.fromLikeComposite){var s=e;return s.fromLikeComposite(s.groups.map(function(t){var e=[];return t.forEach(function(t){return n(t,e)}),t.fromLike(e)}))}var u=[];return e.forEach(function(t){return n(t,u)}),e.fromLike(u)},t.prototype.filter=function(t,e,r){if(void 0===r&&(r=function(t){return t}),this.isAll)return t.map(r);var n=this.iter(e);if(n.byOne&&n instanceof o.a)return t.slice(n.from,n.to).map(r);for(var i=[];n.hasNext();)i.push(r(t[n.next()]));return i},t.prototype.iter=function(t){if(this.isList)return r.i(o.b)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return o.c.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(r){return r.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=n);var e=this.iter().asList(),r=e.sort(t);return this.fromLike(r)},t.prototype.removeDuplicates=function(e){var r=this.iter().asList();return r=r.sort(n),r=r.filter(function(t,e){return t!==r[e-1]}),t.from(r)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}();e.a=s},291:function(t,e,r){"use strict";var n=r(309);r.d(e,"c",function(){return n.b}),r.d(e,"f",function(){return n.a}),r.d(e,"h",function(){return n.c});var i=r(308);r.d(e,"e",function(){return i.a});var o=r(292);r.d(e,"b",function(){return o.b}),r.d(e,"g",function(){return o.a});var s=r(294);r.d(e,"a",function(){return s.a});var u=(r(314),r(304),r(316),r(315));r.d(e,"d",function(){return u.a})},292:function(t,e,r){"use strict";function n(t){if(!t)return s.SET;if("string"==typeof t)switch(t.toLowerCase()){case"add":return s.ADD;case"remove":return s.REMOVE;default:return s.SET}return+t}function i(t,e){for(;t.ndim<e;)t.dims[t.ndim]=o.e.none();return t}var o=r(288);r.d(e,"b",function(){return u}),r.d(e,"a",function(){return s}),e.c=n,e.d=i;var s,u="selected";!function(t){t[t.SET=0]="SET",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE"}(s||(s={}))},293:function(t,e,r){"use strict";(function(t){function n(t,e,r){return new o(t,e,r,r)}function i(t,e){return new o(t.type,t.args,e,t.target)}r.d(e,"a",function(){return u}),r.d(e,"c",function(){return a}),r.d(e,"b",function(){return c});var o=function(){function t(t,e,r,n){this.type=t,this.args=e,this.target=r,this.delegateTarget=n,this.timeStamp=new Date,this.stopped=!1,this.stopedPropagation=!1}return Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.target},enumerable:!0,configurable:!0}),t.prototype.isImmediatePropagationStopped=function(){return this.stopped},t.prototype.stopImmediatePropagation=function(){this.stopped=!0},t.prototype.isPropagationStopped=function(){return this.stopedPropagation},t.prototype.stopPropagation=function(){this.stopedPropagation=!0},t}(),s=function(){function t(t){this.type=t,this.listeners=[]}return t.prototype.push=function(t){this.listeners.push(t)},t.prototype.remove=function(t){var e=this.listeners.indexOf(t);return e>=0&&(this.listeners.splice(e,1),!0)},t.prototype.fire=function(t){if(0===this.listeners.length)return!1;var e=[t].concat(t.args);if(1===this.listeners.length)this.listeners[0].apply(t,e);else for(var r=this.listeners.slice(),n=r.length,i=0;i<n&&!t.isImmediatePropagationStopped();++i)r[i].apply(t,e);return!0},Object.defineProperty(t.prototype,"length",{get:function(){return this.listeners.length},enumerable:!0,configurable:!0}),t}(),u=function(){function t(){this.handlers=new Map}return t.prototype.on=function(e,r){var n=this;return"string"==typeof e?e.split(t.MULTI_EVENT_SEPARATOR).forEach(function(t){n.handlers.has(t)||n.handlers.set(t,new s(t)),n.handlers.get(t).push(r)}):Object.keys(e).forEach(function(t){var r=e[t];n.on(t,r)}),this},t.prototype.off=function(e,r){var n=this;return"string"==typeof e?e.split(t.MULTI_EVENT_SEPARATOR).forEach(function(t){if(n.handlers.has(t)){var e=n.handlers.get(t);e.remove(r),0===e.length&&n.handlers.delete(t)}}):Object.keys(e).forEach(function(t){var r=e[t];n.off(t,r)}),this},t.prototype.list=function(){var t={};return this.handlers.forEach(function(e,r){t[r]=e.length}),t},t.prototype.fire=function(e){for(var r=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e.split(t.MULTI_EVENT_SEPARATOR).forEach(function(t){r.fireEvent(n(t,i,r))}),this},t.prototype.fireEvent=function(t){if(this.handlers.has(t.type)){return this.handlers.get(t.type).fire(t)}return!1},t.prototype.propagate=function(e){for(var r=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.on(n.join(t.MULTI_EVENT_SEPARATOR),function(t){t.isPropagationStopped()||r.fireEvent(i(t,r))})},t}();u.MULTI_EVENT_SEPARATOR=",";var t=new u,a=t.on.bind(t),c=(t.off.bind(t),t.fire.bind(t));t.list.bind(t)}).call(e,r(319))},294:function(t,e,r){"use strict";function n(t,e){void 0===e&&(e={});var n=JSON.stringify(e),i=t.length+n.length,s=i<2e3?"GET":"POST";return r.i(o.b)(t,e,s)}var i=r(8),o=r(109),s=r(293),u=r(288),a=r(292),c=r(309),p=function(t){function e(e,r,n,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.id=e,o.name=r,o.names=n,o.internal=i,o.sel=new Map,o.name2idCache=new Map,o.id2nameCache=new Map,o.canBeMappedTo=null,o}return i.c(e,t),e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,r){return t[r]=e.toString()}),{sel:t,name:this.name,names:this.names}},e.prototype.restore=function(t){var e=this;return this.name=t.name,this.names=t.names,Object.keys(t.sel).forEach(function(r){return e.sel.set(r,t.sel[r])}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){if(void 0===t&&(t=a.b),this.sel.has(t))return this.sel.get(t);var e=r.i(u.g)();return this.sel.set(t,e),e},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():a.b,n=r.i(u.f)(t[0]),i=r.i(a.c)(t[1]);return this.selectImpl(n,i,e)},e.prototype.selectImpl=function(t,n,i){void 0===n&&(n=a.a.SET),void 0===i&&(i=a.b);var o=this.selections(i),s=r.i(u.g)();switch(n){case a.a.SET:s=t;break;case a.a.ADD:s=o.union(t);break;case a.a.REMOVE:s=o.without(t)}if(o.eq(s))return o;this.sel.set(i,s);var c=n!==a.a.REMOVE?t:r.i(u.g)(),p=n===a.a.ADD?r.i(u.g)():n===a.a.SET?o:t;return this.fire(e.EVENT_SELECT,i,s,c,p,o),this.fire(e.EVENT_SELECT+"-"+i,s,c,p,o),o},e.prototype.clear=function(t){return void 0===t&&(t=a.b),this.selectImpl(r.i(u.g)(),a.a.SET,t)},e.prototype.fillMapCache=function(t,e){var r=this;t.forEach(function(t,n){var i=e[n];r.name2idCache.set(i,t),r.id2nameCache.set(t,i)})},e.prototype.getCanBeMappedTo=function(){return null===this.canBeMappedTo&&(this.canBeMappedTo=r.i(o.a)("/idtype/"+this.id+"/").then(function(t){return t.map(c.a)})),this.canBeMappedTo},e.prototype.mapToFirstName=function(t,e){var i=r.i(c.a)(e),o=r.i(u.f)(t);return n("/idtype/"+this.id+"/"+i.id,{ids:o.toString(),mode:"first"})},e.prototype.mapToName=function(t,e){var i=r.i(c.a)(e),o=r.i(u.f)(t);return n("/idtype/"+this.id+"/"+i.id,{ids:o.toString()})},e.prototype.mapToFirstID=function(t,e){var i=r.i(c.a)(e),o=r.i(u.f)(t);return n("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString(),mode:"first"})},e.prototype.mapToID=function(t,e){var i=r.i(c.a)(e),o=r.i(u.f)(t);return n("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString()})},e.prototype.map=function(t){return i.a(this,void 0,void 0,function(){var e,r,o=this;return i.b(this,function(i){switch(i.label){case 0:return e=t.filter(function(t){return!o.name2idCache.has(t)}),0===e.length?[2,Promise.resolve(t.map(function(t){return o.name2idCache.get(t)}))]:[4,n("/idtype/"+this.id+"/map",{ids:e})];case 1:return r=i.sent(),e.forEach(function(t,e){o.name2idCache.set(t,r[e]),o.id2nameCache.set(r[e],t)}),[2,t.map(function(t){return o.name2idCache.get(t)})]}})})},e.prototype.unmap=function(t){return i.a(this,void 0,void 0,function(){var e,o,s,a,c,p=this;return i.b(this,function(i){switch(i.label){case 0:return e=r.i(u.f)(t),o=[],e.dim(0).forEach(function(t){return p.id2nameCache.has(t)?null:o.push(t)}),0===o.length?(s=[],e.dim(0).forEach(function(t){return s.push(p.id2nameCache.get(t))}),[2,Promise.resolve(s)]):[4,n("/idtype/"+this.id+"/unmap",{ids:r.i(u.d)(o).toString()})];case 1:return a=i.sent(),o.forEach(function(t,e){p.id2nameCache.set(t,a[e]),p.name2idCache.set(a[e],t)}),c=[],e.dim(0).forEach(function(t){return c.push(p.id2nameCache.get(t))}),[2,c]}})})},e.prototype.search=function(t,e){return void 0===e&&(e=10),i.a(this,void 0,void 0,function(){var n,s=this;return i.b(this,function(i){switch(i.label){case 0:return[4,r.i(o.a)("/idtype/"+this.id+"/search",{q:t,limit:e})];case 1:return n=i.sent(),n.forEach(function(t){s.id2nameCache.set(t.id,t.name),s.name2idCache.set(t.name,t.id)}),[2,n]}})})},e.prototype.searchMapping=function(t,e,n){void 0===n&&(n=10);var i=r.i(c.a)(e);return r.i(o.a)("/idtype/"+this.id+"/"+i.id+"/search",{q:t,limit:n})},e}(s.a);e.a=p,p.EVENT_SELECT="select"},295:function(t,e,r){"use strict";function n(){return new h}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?n():1===t.length?t[0]:new l(t)}function o(t,e,r){return new p(t,e,r)}function s(t){return new _(t)}function u(t){return new f(t)}var a=r(8);r.d(e,"a",function(){return p}),e.c=i,e.d=o,e.e=s,e.b=u;var c=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var r=0;this.hasNext();)t.call(e,this.next(),r++)},t.prototype.map=function(t,e){return new d(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),p=function(t){function e(e,r,n){var i=t.call(this)||this;return i.from=e,i.to=r,i.step=n,i.act=i.from,i}return a.c(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(c),f=function(t){function e(e){var r=t.call(this)||this;return r.arr=e,r.it=new p(0,e.length,1),r}return a.c(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(c),_=function(t){function e(e){var r=t.call(this)||this;return r.value=e,r.delivered=!1,r}return a.c(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(c),l=function(t){function e(e){var r=t.call(this)||this;return r.its=e,r.act=e.shift(),r}return a.c(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(c),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return a.c(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(c),d=function(t){function e(e,r,n){var i=t.call(this)||this;return i.it=e,i.f=r,i.thisArg=n,i}return a.c(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(c)},296:function(t,e,r){"use strict";function n(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),o.a.from(e)}var i=r(8),o=r(290),s=function(t){function e(e,r,i){var o=t.call(this,i||n(r))||this;return o.name=e,o.groups=r,o}return i.c(e,t),e.prototype.preMultiply=function(r,n){var i=this.groups.length>1?t.prototype.preMultiply.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(r,n)}),i)},e.prototype.union=function(r,n){var i=this.groups.length>1?t.prototype.union.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.union(r,n)}),i)},e.prototype.intersect=function(r,n){var i=this.groups.length>1?t.prototype.intersect.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(r,n)}),i)},e.prototype.without=function(r,n){var i=this.groups.length>1?t.prototype.without.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.without(r,n)}),i)},e.prototype.clone=function(){var r=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),r)},e.prototype.sort=function(r){var n=this.groups.length>1?t.prototype.sort.call(this,r):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(r)}),n)},e.prototype.toSet=function(r){var n=this.groups.length>1?t.prototype.toSet.call(this,r):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(r)}),n)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e.prototype.fromLikeComposite=function(t){return new e(this.name,t)},e}(o.a);e.a=s},297:function(t,e,r){"use strict";function n(){return new s}function i(){return new s([o.a.none(),o.a.none()])}var o=r(290);e.a=n,e.c=i;var s=function(){function t(t){void 0===t&&(t=[]),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,r){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.preMultiply(e.dim(i),r?r[i]:void 0)}),n},t.prototype.union=function(e,r){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.union(e.dim(i),r?r[i]:void 0)}),n},t.prototype.intersect=function(e,r){if(this.isNone||e.isNone)return i();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.intersect(e.dim(i),r?r[i]:void 0)}),n},t.prototype.without=function(e,r){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return i();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.without(e.dim(i),r?r[i]:void 0)}),n},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,r){e.dims[r]=t.clone()}),e},t.prototype.swap=function(){return new t(this.dims.map(function(t){return t.clone()}).reverse())},t.prototype.filter=function(t,e){if(this.isAll)return t;var r=this.ndim,n=this,i=function(t){if(t>=r)return function(t){return t};var o=n.dim(t),s=i(t+1),u=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,u,s):t}};return i(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=o.a.all(),this.dims[t])},t.prototype.invert=function(t,e){var r=this;return this.isAll?t:t.map(function(t,n){return r.dim(n).invert(t,e?e[n]:void 0)})},t.prototype.indexRangeOf=function(e,r){return e.isNone||this.isNone?i():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,n){return t.indexRangeOf(e.dim(n),r?r[n]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var r;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);r=arguments[0]}else r=Array.from(arguments);return 0===r.length?[]:r.map(function(t,r){return e.dim(r).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,r){return e.size(t?t[r]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var r=this,n=this.ndim,i=function(o){var s=o.length;if(s<n){r.dims[s].iter(e?e[s]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}();e.b=s},298:function(t,e,r){"use strict";var n=r(8),i=r(290),o=function(t){function e(e,r,n){var i=t.call(this,n)||this;return i.name=e,i.color=r,i}return n.c(e,t),e.prototype.preMultiply=function(r,n){var i=t.prototype.preMultiply.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.union=function(r,n){var i=t.prototype.union.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.intersect=function(r,n){var i=t.prototype.intersect.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.without=function(r,n){var i=t.prototype.without.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(r){return new e(this.name,this.color,t.prototype.toSet.call(this,r))},e.prototype.fromLike=function(r){return new e(this.name,this.color,t.prototype.fromLike.call(this,r))},e}(i.a);e.a=o},299:function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new l;return t.forEach(function(t){return t.forEach(r.push,r)}),r}function i(t,e){var r=t.length;if(0===r)return NaN;if(r<2||e<=0)return t[0];if(e>=1)return t[r-1];var n=e*(r-1),i=Math.floor(n),o=t[i];return o+(t[i+1]-o)*(n-i)}function o(t){t=t.slice().sort(function(t,e){return t-e});var e=new h(i(t,.5),i(t,.25),i(t,.75));return t.forEach(function(t){return e.push(t)}),e}function s(t,e,r,n,i){var o=new y(n,i);return o.pushAll(t,e,r),o}function u(t,e,r,n,i,o){var s=new v(n,i,o);return s.pushAll(t,e,r),s}function a(t){return new m(t)}function c(t,e){return new y(t.length,e,t)}function p(t){var e=NaN,r=NaN;return t.forEach(function(t){isNaN(t)||((isNaN(e)||e>t)&&(e=t),(isNaN(r)||e<t)&&(r=t))}),[e,r]}var f=r(8),_=r(288);e.c=n,e.d=o,e.f=s,e.e=u,e.b=a,e.g=c,e.a=p;var l=function(){function t(){this.min=NaN,this.max=NaN,this.sum=0,this.mean=0,this._var=0,this.n=0,this.nans=0,this.moment2=NaN,this.moment3=NaN,this.moment4=NaN}return Object.defineProperty(t.prototype,"var",{get:function(){return this.n>1?this._var/(this.n-1):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sd",{get:function(){return Math.sqrt(this.var)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kurtosis",{get:function(){return 0===this.n?0:this.n*this.moment4/(this.moment2*this.moment2)-3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skewness",{get:function(){return 0===this.n?0:Math.sqrt(this.n)*this.moment3/Math.pow(this.moment2,1.5)},enumerable:!0,configurable:!0}),t.prototype.push=function(t){if("number"!=typeof t&&(t=Number.NaN),isNaN(t))return void this.nans++;if(this.n++,this.sum+=t,(t<this.min||isNaN(this.min))&&(this.min=t),(this.max<t||isNaN(this.max))&&(this.max=t),1===this.n)this.mean=t,this._var=0,this.moment2=this.moment3=this.moment4=0;else{var e=this.mean;this.mean=e+(t-e)/this.n,this._var=this._var+(t-e)*(t-this.mean);var r=t-e,n=r/this.n,i=n*n,o=r*n*(this.n-1);this.moment4+=o*i*(this.n*this.n-3*this.n+3)+6*i*this.moment2-4*n*this.moment3,this.moment3+=o*n*(this.n-2)-3*n*this.moment2,this.moment2+=o}},t}(),h=function(t){function e(e,r,n){var i=t.call(this)||this;return i.median=e,i.q1=r,i.q3=n,i}return f.c(e,t),e}(l),d=function(){function t(t,e){this._missing=0,this._missingRange=r.i(_.g)(),this._bins=[];for(var n=0;n<t;++n)this._bins.push(e&&e.length>n?e[n]:0)}return Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max(Math.max.apply(Math,this._bins),this._missing)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return Math.max.apply(Math,this._bins)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.validCount+this._missing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this._bins.reduce(function(t,e){return t+e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._bins.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return-1},t.prototype.frequency=function(t){return this._bins[t]},t.prototype.range=function(t){return this._ranges?this._ranges[t]:r.i(_.g)()},Object.defineProperty(t.prototype,"missing",{get:function(){return this._missing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return this._missingRange},enumerable:!0,configurable:!0}),t.prototype.pushAll=function(t,e,n){for(var i=this,o=[],s=[],u=this.bins-1;u>=0;--u)o.push([]);if(e){var a=e.iter(n);t.forEach(function(t){var e=a.next(),r=i.binOf(t);r<0?(i._missing++,s.push(e)):(i._bins[r]++,o[r].push(e))}),this._ranges=o.map(function(t){return r.i(_.d)(t.sort().filter(function(t,e,r){return t!==r[e-1]}))}),this._missingRange=r.i(_.d)(s.sort().filter(function(t,e,r){return t!==r[e-1]}))}else t.forEach(function(t){var e=i.binOf(t);e<0?i._missing++:i._bins[e]++}),this._ranges=null,this._missingRange=null},t.prototype.forEach=function(t,e){return this._bins.forEach(t,e)},t}(),y=function(t){function e(e,r,n){var i=t.call(this,e,n)||this;return i.valueRange=r,i}return f.c(e,t),e.prototype.binOf=function(t){return"number"==typeof t?this.binOfImpl(t):-1},e.prototype.binOfImpl=function(t){if(isNaN(t))return-1;var e=(t-this.valueRange[0])/(this.valueRange[1]-this.valueRange[0]),r=Math.round(e*(this.bins-1));return r<0&&(r=0),r>=this.bins&&(r=this.bins-1),isNaN(r)?-1:r},e}(d),v=function(t){function e(e,r,n){var i=t.call(this,e.length)||this;return i.values=e,i.categories=r,i.colors=n,i}return f.c(e,t),e.prototype.binOf=function(t){return this.values.indexOf(t)},e}(d),m=function(){function t(t){this._range=t}return Object.defineProperty(t.prototype,"categories",{get:function(){return this._range.groups.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colors",{get:function(){return this._range.groups.map(function(t){return t.color})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max.apply(Math,this._range.groups.map(function(t){return t.length}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return this.largestFrequency},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._range.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._range.groups.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return this._range.groups.findIndex(function(e){return e.name===t})},t.prototype.frequency=function(t){return this._range.groups[t].length},t.prototype.range=function(t){return r.i(_.d)(this._range.groups[t])},Object.defineProperty(t.prototype,"missing",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return r.i(_.g)()},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this._range.groups.forEach(function(r,n){return t.call(e,r.length,n)})},t}()},300:function(t,e,r){"use strict";var n=r(301),i=r(295),o=r(310),s=function(){function t(t,e,r){if(void 0===e&&(e=-1),void 0===r&&(r=1),this.from=t,this.to=e,this.step=r,0===r)throw new Error("invalid step size: "+r)}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new o.a(t)},t.range=function(e,r,n){return void 0===r&&(r=-1),void 0===n&&(n=1),e+n===r?t.single(e):new t(e,r,n)},t.prototype.size=function(t){var e=r.i(n.a)(this.to,t),i=r.i(n.a)(this.from,t);if(1===this.step)return Math.max(e-i,0);if(-1===this.step)return-1===this.to?Math.max(i- -1,0):Math.max(i-e,0);var o=this.step>0?e-i+1:i-e+1,s=Math.abs(this.step);return o<=0?0:Math.floor(o/s)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){if(this.step>0){var e=this.from-1,r=this.to-1;return new t(r,e,-this.step)}var e=this.from-1,r=this.to-1;return new t(r,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:r.i(n.a)(this.from,e)+t*this.step},t.prototype.iter=function(t){return this.step<0&&-1===this.to?r.i(i.d)(r.i(n.a)(this.from,t),-1,this.step):r.i(i.d)(r.i(n.a)(this.from,t),r.i(n.a)(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){if(this.isAll)return!0;var i=r.i(n.a)(this.from,e),o=r.i(n.a)(this.to,e);return-1===this.step?-1===this.to?t<=i&&t>=0:t<=i&&t>o:1===this.step?t>=i&&t<o:this.iter(e).asList().indexOf(t)>=0},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var r=function(t,e){if(void 0===e&&(e=NaN),""===(t=t.trim())&&!isNaN(e))return e;var r=parseInt(t,10);if(isNaN(r))throw Error('parse error: "'+t+'" is not a valid integer');return r},n=e.split(":");switch(n.length){case 1:return t.single(r(n[0]));case 2:return new t(r(n[0],0),r(n[1],-1));case 3:return new t(r(n[0],0),r(n[1],-1),r(n[2],1));default:throw new Error('parse error: "'+e+'" is not a valid range specifier')}},t}();e.a=s},301:function(t,e,r){"use strict";function n(t,e){return t<0?e+1+t:t}e.a=n},304:function(t,e,r){"use strict";function n(t,e,r){if(0===e.ndim)return!0;for(var n=function(r){var n=t.dim(r),i=e.dim(r);return i.isAll||n.isAll?{value:!0}:!n.isUnbound&&n.asList().every(function(t){return!i.contains(t)})?{value:!1}:void 0},i=0;i<Math.min(t.ndim,r);++i){var o=n(i);if("object"==typeof o)return o.value}return!1}function i(t,e,r){if(0===e.length)return t;var i=[];return t.forEach(function(t){e.some(function(e){return e.eq(t)})||e.some(function(e){return n(t,e,r)})||i.push(t)}),i}var o=r(8),s=r(293),u=r(288),a=r(292),c=r(294),p=function(t){function e(r,n){void 0===n&&(n=!1);var i=t.call(this)||this;return i.elems=r,i.internal=n,i.sel=new Map,i.isOn=!1,i.selectionListener=function(t,r,n,o,s){i.fire(e.EVENT_SELECT_DIM+","+e.EVENT_SELECT_PRODUCT,i.elems.indexOf(t.currentTarget),r,n,o,s),i.fire(e.EVENT_SELECT_DIM+"-"+r+","+e.EVENT_SELECT_PRODUCT+"-"+r,i.elems.indexOf(t.currentTarget),n,o,s)},i}return o.c(e,t),e.prototype.on=function(e,r){return this.isOn||(this.enable(),this.isOn=!0),t.prototype.on.call(this,e,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.elems.map(function(t){return t.id}).join("X")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.elems.map(function(t){return t.name}).join(" x ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.elems.map(function(t){return t.names}).join(" x ")},enumerable:!0,configurable:!0}),e.prototype.enable=function(){var t=this;this.elems.forEach(function(e){return e.on(c.a.EVENT_SELECT,t.selectionListener)})},e.prototype.disable=function(){var t=this;this.elems.forEach(function(e){return e.off(c.a.EVENT_SELECT,t.selectionListener)})},e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,r){return t[r]=e.map(function(t){return t.toString()})}),{sel:t}},e.prototype.restore=function(t){var e=this;return Object.keys(t.sel).forEach(function(r){return e.sel.set(r,t.sel[r].map(u.f))}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){return void 0===t&&(t=a.b),this.sel.has(t)?this.sel.get(t).slice():(this.sel.set(t,[]),[])},e.prototype.productSelections=function(t){var e=this;void 0===t&&(t=a.b);var n=this.selections(t),i=this.toPerDim(n);return this.elems.forEach(function(o,s){var a=o.selections(t),c=a.without(i[s]);c.isNone||n.push(r.i(u.d)(e.elems.map(function(t){return o===t?c.dim(0):u.e.all()})))}),n},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():a.b,n=t[0].map(u.f),i=r.i(a.c)(t[1]);return this.selectImpl(n,i,e)},e.prototype.selectImpl=function(t,r,n){void 0===r&&(r=a.a.SET),void 0===n&&(n=a.b);var o=t.map(u.f),s=this.selections(n),p=[];switch(r){case a.a.SET:p=o;break;case a.a.ADD:p=s.concat(o);break;case a.a.REMOVE:p=i(s,o,this.elems.length)}this.sel.set(n,p);var f=this.toPerDim(p);this.disable(),this.elems.forEach(function(t,e){return t.select(n,f[e])}),this.enable();var _=r!==a.a.REMOVE?o:[],l=r===a.a.ADD?[]:r===a.a.SET?s:o;return this.fire(c.a.EVENT_SELECT,n,p,_,l,s),this.fire(e.EVENT_SELECT_PRODUCT,-1,n,p,_,l,s),this.fire(c.a.EVENT_SELECT+"-"+n,p,_,l,s),this.fire(e.EVENT_SELECT_PRODUCT+"-"+n,-1,p,_,l,s),s},e.prototype.toPerDim=function(t){return this.elems.map(function(e,n){if(0===t.length)return r.i(u.g)();var i=t.map(function(t){return t.dim(n)}),o=i.reduce(function(t,e){return t?t.union(e):e},null);return r.i(u.d)(o)})},e.prototype.clear=function(t){return void 0===t&&(t=a.b),this.selectImpl([],a.a.SET,t)},e}(s.a);e.a=p,p.EVENT_SELECT_DIM="selectDim",p.EVENT_SELECT_PRODUCT="selectProduct"},305:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(288),__WEBPACK_IMPORTED_MODULE_2__index__=__webpack_require__(18),__WEBPACK_IMPORTED_MODULE_3__idtype__=__webpack_require__(291),__WEBPACK_IMPORTED_MODULE_4__datatype__=__webpack_require__(289),__WEBPACK_IMPORTED_MODULE_5__math__=__webpack_require__(299),__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__=__webpack_require__(348),__WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__=__webpack_require__(347),AVector=function(_super){function AVector(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(AVector,_super),Object.defineProperty(AVector.prototype,"dim",{get:function(){return[this.length]},enumerable:!0,configurable:!0}),Object.defineProperty(AVector.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),AVector.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),new VectorView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t))},AVector.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return e=r.sent(),[2,this.view(e.indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t)))]}})})},AVector.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.g&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.f?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.c,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})},AVector.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.g&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.f?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.d,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})},Object.defineProperty(AVector.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.k)(0,this.length)},enumerable:!0,configurable:!0}),AVector.prototype.groups=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var t,e,r,n,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(o){switch(o.label){case 0:return t=this.root.valuetype,t.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.d?[3,2]:(e=t,[4,this.data()]);case 1:return r=o.sent(),n={name:this.root.desc.id},"string"!=typeof e.categories[0]&&(i=e.categories,i[0].color&&(n.colors=i.map(function(t){return t.color})),i[0].label&&(n.labels=i.map(function(t){return t.label}))),[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__datatype__.i)(r,e.categories.map(function(t){return"string"==typeof t?t:t.name}),n)];case 2:return[2,Promise.resolve(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.j)(this.root.desc.id,[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.b)(this.indices.dim(0))]))]}})})},AVector.prototype.stratification=function(){return this.asStratification()},AVector.prototype.asStratification=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var t,e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return t=__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a.bind,e=[void 0,this.root],[4,this.groups()];case 1:return[2,new(t.apply(__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a,e.concat([r.sent()])))]}})})},AVector.prototype.hist=function(t,e){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var r,n,i,o;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(s){switch(s.label){case 0:return r=this.root.valuetype,[4,this.data(e)];case 1:switch(n=s.sent(),r.type){case __WEBPACK_IMPORTED_MODULE_4__datatype__.d:return i=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.e)(n,this.indices.dim(0),n.length,i.categories.map(function(t){return"string"==typeof t?t:t.name}),i.categories.map(function(t){return"string"==typeof t?t:t.name||t.label}),i.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}))];case __WEBPACK_IMPORTED_MODULE_4__datatype__.f:case __WEBPACK_IMPORTED_MODULE_4__datatype__.g:return o=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.f)(n,this.indices.dim(0),n.length,t||Math.round(Math.sqrt(this.length)),o.range)];default:return[2,null]}return[2]}})})},AVector.prototype.every=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return[2,r.sent().every(t,e)]}})})},AVector.prototype.some=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return[2,r.sent().some(t,e)]}})})},AVector.prototype.forEach=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return r.sent().forEach(t,e),[2]}})})},AVector.prototype.reduce=function(t,e,r){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){function n(){return t.apply(r,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduce(n,e)]}})})},AVector.prototype.reduceRight=function(t,e,r){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){function n(){return t.apply(r,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduceRight(n,e)]}})})},AVector.prototype.reduceAtom=function(t,e,r,n){var i=this;return new __WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__.a(i,t,e,r,n)},AVector.prototype.restore=function(persisted){var r=this;return persisted&&persisted.f?this.reduceAtom(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__idtype__.f)(persisted.idtype):void 0):(persisted&&persisted.range&&(r=r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(persisted.range))),r)},AVector}(__WEBPACK_IMPORTED_MODULE_3__idtype__.e);__webpack_exports__.a=AVector;var VectorView=function(t){function e(e,r){var n=t.call(this,e)||this;return n.range=r,n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.size=function(){return this.range.size(this.root.dim)[0]},e.prototype.at=function(t){var e=this.range.invert([t],this.root.dim);return this.root.at(e[0])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.names=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.names(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.ids(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.sort=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var r,n;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return r=i.sent(),n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.l)(r,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.d)(n))]}})})},e.prototype.filter=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var r,n;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return r=i.sent(),n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.m)(r,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.d)(n))]}})})},e}(AVector)},308:function(t,e,r){"use strict";var n=r(8),i=r(293),o=r(288),s=r(292),u=r(294),a=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.numSelectListeners=0,i.selectionListeners=[],i.singleSelectionListener=function(t,o,u,a,c){return n.a(i,void 0,void 0,function(){var t;return n.b(this,function(n){switch(n.label){case 0:return[4,this.ids()];case 1:return t=n.sent(),(u=t.indexOf(u),a=t.indexOf(a),c=t.indexOf(c),u.isNone&&a.isNone&&c.isNone)?[2]:(r.i(s.d)(u,t.ndim),r.i(s.d)(a,t.ndim),r.i(s.d)(c,t.ndim),this.fire(e.EVENT_SELECT,o,u,a,c),this.fire(e.EVENT_SELECT+"-"+o,u,a,c),[2])}})})},i.selectionCache=[],i.accumulateEvents=-1,i}return n.c(e,t),e.prototype.fromIdRange=function(t){return void 0===t&&(t=r.i(o.c)()),n.a(this,void 0,void 0,function(){return n.b(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return[2,e.sent().indexOf(r.i(o.f)(t))]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.selectionListener=function(t,e,r){var n=this;return function(t,i,o,s,u){n.selectionCache[e]={act:o,added:s,removed:u},(n.accumulateEvents<0||++n.accumulateEvents===r)&&n.fillAndSend(i,e)}},e.prototype.fillAndSend=function(t,e){var n=this,i=this.idtypes,s=i.map(function(e,i){var s=n.selectionCache[i];return s||{act:e.selections(t),added:r.i(o.g)(),removed:r.i(o.g)()}}),u=r.i(o.h)(s.map(function(t){return t.act})),a=r.i(o.h)(s.map(function(t){return t.added})),c=r.i(o.h)(s.map(function(t){return t.removed}));this.selectionCache=[],this.accumulateEvents=-1,this.singleSelectionListener(null,t,u,a,c)},e.prototype.on=function(r,n){var i=this;if("string"==typeof r&&(r===e.EVENT_SELECT||"select-"===r.slice(0,"select-".length))&&1===++this.numSelectListeners){var o=this.idtypes;1===o.length?(this.selectionListeners.push(this.singleSelectionListener),o[0].on(e.EVENT_SELECT,this.singleSelectionListener)):o.forEach(function(t,r){var n=i.selectionListener(t,r,o.length);i.selectionListeners.push(n),t.on(e.EVENT_SELECT,n)})}return t.prototype.on.call(this,r,n)},e.prototype.off=function(r,n){var i=this;return"string"!=typeof r||r!==e.EVENT_SELECT&&"select-"!==r.slice(0,"select-".length)||0===--this.numSelectListeners&&(this.idtypes.forEach(function(t,r){return t.off(e.EVENT_SELECT,i.selectionListeners[r])}),this.selectionListeners=[]),t.prototype.off.call(this,r,n)},e.prototype.selections=function(t){return void 0===t&&(t=s.b),n.a(this,void 0,void 0,function(){var e,i;return n.b(this,function(n){switch(n.label){case 0:return[4,this.ids()];case 1:return e=n.sent(),i=r.i(o.h)(this.idtypes.map(function(e){return e.selections(t)})),[2,e.indexRangeOf(i)]}})})},e.prototype.select=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,n="string"==typeof t[0]?t.shift():s.b,i=r.i(o.f)(t[0]),u=r.i(s.c)(t[1]);return this.selectImpl(i,u,n,e)},e.prototype.selectImpl=function(t,e,i,u){return void 0===e&&(e=s.a.SET),void 0===i&&(i=s.b),void 0===u&&(u=-1),n.a(this,void 0,void 0,function(){var s,a,c;return n.b(this,function(n){switch(n.label){case 0:return s=this.idtypes,[4,this.ids()];case 1:if(a=n.sent(),-1===u){for(t=a.preMultiply(t),this.accumulateEvents=0,c=r.i(o.h)(t.split().map(function(t,r){return s[r].select(i,t,e)})),this.accumulateEvents>0&&this.fillAndSend(i,-1);c.ndim<s.length;)c.dim(c.ndim);return[2,a.indexRangeOf(c)]}return a=a.split()[u],t=a.preMultiply(t),s[u].select(i,t,e),[2,a.indexRangeOf(t)]}})})},e.prototype.clear=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,n="string"==typeof t[0]?t[0]:s.b;return this.selectImpl(r.i(o.g)(),s.a.SET,n,e)},e}(i.a);a.EVENT_SELECT=u.a.EVENT_SELECT,e.a=a},309:function(t,e,r){"use strict";function n(t){return"y"===t[t.length-1]?t.slice(0,t.length-1)+"ies":t+"s"}function i(t){if(t instanceof c.a)return t;var e=t;return u(e,new c.a(e,e,n(e)))}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new p.a(t);return u(r.id,r)}function s(){return Array.from(f.values())}function u(t,e){return f.has(t)?f.get(t):(f.set(t,e),r.i(a.b)("register.idtype",e),e)}var a=(r(8),r(109),r(293)),c=(r(292),r(294)),p=r(304);e.a=i,e.c=o,e.b=s;var f=new Map},310:function(t,e,r){"use strict";var n=r(301),i=r(295),o=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return r.i(n.a)(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return r.i(n.a)(this.from,e)+t},t.prototype.iter=function(t){return r.i(i.e)(r.i(n.a)(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}();e.a=o},311:function(t,e,r){"use strict";function n(t){var e,r,n=[],a=0;for(t=t.trim();a<t.length;)switch(e=t.charAt(a)){case'"':r=i(t,a),a=r.act+1,n.push(r.dim);break;case",":a++,n.push(u.a.all());break;default:e.match(/\s/)?a++:(r=o(t,a),a=r.act+1,n.push(r.dim))}return","===t.charAt(t.length-1)&&n.push(u.a.all()),new s.b(n)}function i(t,e){e+=1;var r,n=t.indexOf('"',e),s=t.slice(e,n);switch(e=n+1,t.charAt(e)){case'"':return n=t.indexOf('"',e+1),r=o(t,n+1),{dim:new a.a(s,t.slice(e+1,n),r.dim),act:r.act};case"{":for(var c=[];"}"!==t.charAt(e);)r=i(t,e+1),c.push(r.dim),e=r.act;return{dim:new p.a(s,c),act:r.act+1};default:return{dim:u.a.all(),act:e}}}function o(t,e){var r,n;switch(t.charAt(e)){case",":case"}":r=e,n=u.a.all();break;case"(":n=new u.a,r=t.indexOf(")",e),r>e+1&&n.push.apply(n,t.slice(e+1,r).split(",").map(c.a.parse)),r+=1;break;default:r=t.indexOf("}",e);var i=t.indexOf(",",e);r>=0&&i>=0?r=Math.min(r,i):r<0&&(r=i),r<0&&(r=t.length),n=new u.a([c.a.parse(t.slice(e,r))])}return{act:r,dim:n}}var s=r(297),u=r(290),a=r(298),c=r(300),p=r(296);e.a=n},314:function(t,e,r){"use strict";var n=r(8),i=r(288),o=r(292),s=r(308),u=r(304),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numProductSelectListeners=0,e.productSelectionListener=function(t,n,i){var s=e.producttype.productSelections(i);if(0===s.length)return e.fire(u.a.EVENT_SELECT_PRODUCT,i,[]),void e.fire(u.a.EVENT_SELECT_PRODUCT+"-"+i,[]);e.ids().then(function(t){var n=s.map(function(e){return t.indexOf(e)}).filter(function(t){return!t.isNone});0!==n.length&&(n.forEach(function(e){return r.i(o.d)(e,t.ndim)}),e.fire(u.a.EVENT_SELECT_PRODUCT,i,n),e.fire(u.a.EVENT_SELECT_PRODUCT+"-"+i,n))})},e}return n.c(e,t),e.prototype.on=function(e,r){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||1===++this.numProductSelectListeners&&this.producttype.on("selectProduct",this.productSelectionListener),t.prototype.on.call(this,e,r)},e.prototype.off=function(e,r){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||0===--this.numProductSelectListeners&&this.producttype.off("selectProduct",this.productSelectionListener),t.prototype.off.call(this,e,r)},e.prototype.productSelections=function(t){var e=this;return void 0===t&&(t=o.b),this.ids().then(function(n){var i=e.producttype.productSelections(t),s=i.map(function(t){return n.indexRangeOf(t)}).filter(function(t){return!t.isNone});return s.forEach(function(t){return r.i(o.d)(t,n.ndim)}),s})},e.prototype.selectProduct=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():o.b,n=t[0].map(i.f),s=r.i(o.c)(t[1]);return this.selectProductImpl(n,s,e)},e.prototype.selectProductImpl=function(t,e,r){var n=this;return void 0===e&&(e=o.a.SET),void 0===r&&(r=o.b),this.ids().then(function(i){return t=t.map(function(t){return i.preMultiply(t)}),n.producttype.select(r,t,e)})},e.prototype.clear=function(){var t=Array.from(arguments);"number"==typeof t[0]&&t.shift();var e="string"==typeof t[0]?t[0]:o.b;return this.selectProductImpl([],o.a.SET,e||o.b)},e}(s.a);e.a=a},315:function(t,e,r){"use strict";function n(){var t=new s;return t.map.bind(t)}var i=r(18),o=r(288);e.a=n;var s=function(){function t(){this.pool=new i.f,this.lookup=new Map}return t.prototype.unmapOne=function(t){return this.unmap([t])[0]},t.prototype.unmap=function(t){var e=this,r=Object.keys(this.lookup);return t.map(function(t){for(var n in r)if(e.lookup.get(n)===t)return n;return null})},t.prototype.mapOne=function(t){return this.lookup.has(t)?this.lookup.get(t):(this.lookup.set(t,this.pool.checkOut()),this.lookup.get(t))},t.prototype.map=function(t){var e=this,r=t.map(function(t){return e.mapOne(t)});return o.d.apply(void 0,r)},t}()},316:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(292),s=r(294);!function(t){function e(e,r){var n=t.call(this,e,r,r+"s",!0)||this;return n.instances=[],n.pool=new i.f,n}n.c(e,t),e.prototype.nextId=function(t){var e=this.pool.checkOut();return t&&(t.id=e,this.instances[e]=t,this.fire("add",e,t)),e},e.prototype.push=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach(function(e){t.instances[e.id]=e,t.fire("add",e.id,e)})},e.prototype.byId=function(t){return this.instances[t]},e.prototype.forEach=function(t,e){var r=this;this.instances.forEach(function(n,i){return r.pool.isCheckedOut(i)?t.call(e,n):null})},Object.defineProperty(e.prototype,"entries",{get:function(){var t=this;return this.instances.filter(function(e,r){return t.pool.isCheckedOut(r)})},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){var e=this,r=null;return"number"==typeof t.id&&(t=t.id),"number"==typeof t&&(r=this.instances[t],delete this.instances[t],this.fire("remove",t,r)),this.selectionTypes().forEach(function(r){e.select(r,[t],o.a.REMOVE)}),this.pool.checkIn(t),r},e.prototype.selectedObjects=function(t){return void 0===t&&(t=o.b),this.selections(t).filter(this.instances)}}(s.a)},317:function(t,e,r){"use strict";function n(){return!0===r.i(c.b)("logged_in")}function i(){return n()?r.i(c.b)("user",f):null}function o(){var t=i();return t?t.name:f.name}function s(t){return(t.has(p.READ)?4:0)+(t.has(p.WRITE)?2:0)+(t.has(p.EXECUTE)?1:0)}function u(t){return(t.has(p.READ)?"r":"-")+(t.has(p.WRITE)?"w":"-")+(t.has(p.EXECUTE)?"x":"-")}function a(t,e,r){return 100*s(t)+10*s(e)+s(r)}var c=r(318);r(293);e.a=o;var p,f={name:"anonymous",roles:["anonymous"]};!function(t){t[t.READ=4]="READ",t[t.WRITE=2]="WRITE",t[t.EXECUTE=1]="EXECUTE"}(p||(p={}));var _;!function(t){t[t.USER=0]="USER",t[t.GROUP=1]="GROUP",t[t.OTHERS=2]="OTHERS"}(_||(_={}));!function(){function t(t,e,r){this.user=t,this.group=e,this.others=r}t.prototype.encode=function(){return a(this.user,this.group,this.others)},t.prototype.toString=function(){return u(this.user)+u(this.group)+u(this.others)},t.prototype.getPermissions=function(t){switch(t){case _.USER:return this.user;case _.GROUP:return this.group;case _.OTHERS:return this.others}},t.prototype.hasPermission=function(t,e){return this.getPermissions(t).has(e)}}()},318:function(t,e,r){"use strict";function n(t,e){var r=u.getItem(t);return u.setItem(t,JSON.stringify(e)),r}function i(t){u.removeItem(t)}function o(t){return null!==u.getItem(t)}function s(t,e){return void 0===e&&(e=null),o(t)?JSON.parse(u.getItem(t)):e}e.c=n,e.a=i,e.b=s;var u=sessionStorage},319:function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},323:function(module,__webpack_exports__,__webpack_require__){"use strict";function flatten(t,e,r){void 0===r&&(r=0);var n=[],i=[t.length,t[0].length];if(0===r)n=n.concat.apply(n,t);else for(var o=function(e){t.forEach(function(t){n.push(t[e])})},s=0;s<i[1];++s)o(s);return{data:n,indices:e.dim(r).repeat(i[1-r])}}var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(288),__WEBPACK_IMPORTED_MODULE_2__idtype__=__webpack_require__(291),__WEBPACK_IMPORTED_MODULE_3__idtype_AProductSelectAble__=__webpack_require__(314),__WEBPACK_IMPORTED_MODULE_4__datatype__=__webpack_require__(289),__WEBPACK_IMPORTED_MODULE_5__math__=__webpack_require__(299),__WEBPACK_IMPORTED_MODULE_6__internal_SliceColVector__=__webpack_require__(334),__WEBPACK_IMPORTED_MODULE_7__internal_ProjectedVector__=__webpack_require__(333);__webpack_require__.d(__webpack_exports__,"b",function(){return MatrixView});var AMatrix=function(_super){function AMatrix(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(AMatrix,_super),Object.defineProperty(AMatrix.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"length",{get:function(){return this.nrow*this.ncol},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.k)([0,this.nrow],[0,this.ncol])},enumerable:!0,configurable:!0}),AMatrix.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)());var e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t);return e.isAll?this.root:new MatrixView(this.root,e)},AMatrix.prototype.slice=function(t){return new __WEBPACK_IMPORTED_MODULE_6__internal_SliceColVector__.a(this.root,t)},AMatrix.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e,r,n,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(o){switch(o.label){case 0:return e=this.root.valuetype,e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.g&&e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.f?[3,2]:(n=(r=__WEBPACK_IMPORTED_MODULE_5__math__.c).apply,i=[void 0],[4,this.data(t)]);case 1:return[2,n.apply(r,i.concat([o.sent()]))];case 2:return[2,Promise.reject("invalid value type: "+e.type)]}})})},AMatrix.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e,r,n,i,o;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(s){switch(s.label){case 0:return e=this.root.valuetype,e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.g&&e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.f?[3,2]:(r=__WEBPACK_IMPORTED_MODULE_5__math__.d,i=(n=[].concat).apply,o=[[]],[4,this.data(t)]);case 1:return[2,r.apply(void 0,[i.apply(n,o.concat([s.sent()]))])];case 2:return[2,Promise.reject("invalid value type: "+e.type)]}})})},AMatrix.prototype.hist=function(t,e,r){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),void 0===r&&(r=0),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var n,i,o,s,u;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(a){switch(a.label){case 0:return n=this.root.valuetype,[4,this.data(e)];case 1:switch(i=a.sent(),o=flatten(i,this.indices,r),n.type){case __WEBPACK_IMPORTED_MODULE_4__datatype__.d:return s=n,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.e)(o.data,o.indices,o.data.length,s.categories.map(function(t){return"string"==typeof t?t:t.name}),s.categories.map(function(t){return"string"==typeof t?t:t.name||t.label}),s.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}))];case __WEBPACK_IMPORTED_MODULE_4__datatype__.g:case __WEBPACK_IMPORTED_MODULE_4__datatype__.f:return u=n,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.f)(o.data,o.indices,o.data.length,t||Math.round(Math.sqrt(this.length)),u.range)];default:return[2,Promise.reject("invalid value type: "+n.type)]}return[2]}})})},AMatrix.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e,r;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(n){switch(n.label){case 0:return e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),e.isAll?[2,Promise.resolve(this.root)]:[4,this.ids()];case 1:return r=n.sent(),[2,this.view(r.indexOf(e))]}})})},AMatrix.prototype.reduce=function(t,e,r,n){return new __WEBPACK_IMPORTED_MODULE_7__internal_ProjectedVector__.a(this.root,t,e,r,n)},AMatrix.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__idtype__.f)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(persisted.range)):persisted&&persisted.transposed?this.t:persisted&&persisted.col?this.slice(+persisted.col):persisted&&persisted.row?this.t.slice(+persisted.row):this},AMatrix}(__WEBPACK_IMPORTED_MODULE_3__idtype_AProductSelectAble__.a);__webpack_exports__.a=AMatrix;var MatrixView=function(t){function e(r,n,i){void 0===i&&(i=null);var o=t.call(this,r)||this;return o.range=n,o.t=i,o.range=n,n.dim(0),n.dim(1),i||(o.t=new e(r.t,n.swap(),o)),o}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.ids(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.cols(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.colIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.colIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.rows(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.rowIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.size=function(){return this.range.size(this.root.dim)},e.prototype.at=function(t,e){var r=this.range.invert([t,e],this.root.dim);return this.root.at(r[0],r[1])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.hist=function(t,e,r){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),void 0===r&&(r=0),this.root.hist(t,this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(e),this.root.dim),r)},e.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.stats(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.statsAdvanced(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),void 0===e&&(e={}),this.root.heatmapUrl(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim),e)},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowtype",{get:function(){return this.root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coltype",{get:function(){return this.root.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"producttype",{get:function(){return this.root.producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return this.root.idtypes},enumerable:!0,configurable:!0}),e}(AMatrix)},324:function(t,e,r){"use strict";var n=r(8),i=r(288),o=r(291),s=r(299),u=function(t){function e(e,r,n){var i=t.call(this)||this;return i.root=e,i.groupIndex=r,i.groupDesc=n,i}return n.c(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return[this.groupDesc]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return 0===t?this:null},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(i.c)()),n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return t=s.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.all([this.root.asVector(),this.rangeGroup()]).then(function(t){return t[0].view(r.i(i.d)(t[1]))})},e.prototype.origin=function(){return this.root.origin()},e.prototype.range=function(){return n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return[4,this.rangeGroup()];case 1:return t=e.sent(),[2,new i.a(t.name,[t])]}})})},e.prototype.idRange=function(){return n.a(this,void 0,void 0,function(){var t,e;return n.b(this,function(r){switch(r.label){case 0:return[4,this.root.idRange()];case 1:return t=r.sent(),e=t.groups[this.groupIndex],[2,new i.a(e.name,[e])]}})})},e.prototype.rangeGroup=function(){return n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return[4,this.root.range()];case 1:return t=e.sent(),[2,t.groups[this.groupIndex]]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(i.c)()),n.a(this,void 0,void 0,function(){var e,o;return n.b(this,function(n){switch(n.label){case 0:return[4,this.rangeGroup()];case 1:return e=n.sent(),o=r.i(i.d)(e).preMultiply(r.i(i.f)(t)),[2,this.root.names(o)]}})})},e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.c)()),n.a(this,void 0,void 0,function(){var e,o;return n.b(this,function(n){switch(n.label){case 0:return[4,this.rangeGroup()];case 1:return e=n.sent(),o=r.i(i.d)(e).preMultiply(r.i(i.f)(t)),[2,this.root.ids(o)]}})})},e.prototype.idView=function(t){return void 0===t&&(t=r.i(i.c)()),Promise.reject("not implemented")},e.prototype.toString=function(){return this.persist()},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return[this.length]},Object.defineProperty(e.prototype,"length",{get:function(){return this.groupDesc.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),group:this.groupIndex}},e.prototype.restore=function(t){return this},e}(o.e);e.a=u},327:function(t,e,r){"use strict";function n(){return Promise.all(Array.from(v.values()))}function i(t,e){return v.set(t.id,e),g.set(t.fqname,e),m.set(t.name,e),e}function o(t){return f.a(this,void 0,void 0,function(){var e;return f.b(this,function(n){return void 0===t?[2,null]:(t.id=t.id||r.i(_.j)(t.name+r.i(_.k)(5)),t.fqname=t.fqname||t.name,t.description=t.description||"",t.creator=t.creator||"Anonymous",t.ts=t.ts||0,v.has(t.id)?[2,v.get(t.id)]:(e=y.filter(function(e){return e.id===t.type}),0===e.length?[2,i(t,Promise.resolve(new d.e(t)))]:[2,i(t,e[0].load().then(function(e){return e.factory(t)}))]))})})}function s(t){return f.a(this,void 0,void 0,function(){var e,i,s;return f.b(this,function(u){return e="function"==typeof t?t:null,i=void 0!==t&&"function"!=typeof t?t:{},s=_.b?n():r.i(l.a)("/dataset/",i).then(function(t){return Promise.all(t.map(o))}),null!==e&&(s=s.then(function(t){return t.filter(e)})),[2,s]})})}function u(t){return f.a(this,void 0,void 0,function(){var e,r;return f.b(this,function(n){switch(n.label){case 0:return"string"==typeof t||t instanceof RegExp?[2,a(t)]:(e=t,e.limit=1,[4,s(e)]);case 1:return r=n.sent(),0===r.length?[2,Promise.reject({error:"nothing found, matching",args:e})]:[2,Promise.resolve(r[0])]}})})}function a(t){return p(t,m,"name")}function c(t){return p(t,g,"fqname")}function p(t,e,r){for(var n="string"==typeof t?new RegExp(t):t,i=0,o=Array.from(e.entries());i<o.length;i++){var s=o[i],a=s[0],c=s[1];if(n.test(a))return c}return u((p={},p[r]="string"==typeof t?t:t.source,p));var p}var f=r(8),_=r(18),l=r(109),h=r(19),d=r(289);r(280);e.a=c;var y=r.i(h.b)("datatype"),v=new Map,m=new Map,g=new Map},332:function(t,e,r){"use strict";function n(){return r.i(o.a)(r.i(i.b)(),{type:"matrix",rowtype:"_rows",coltype:"_cols",size:[0,0]})}var i=r(289),o=r(18);e.a=n},333:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(288),s=r(305),u=function(t){function e(e,r,n,i,o){void 0===n&&(n=e),void 0===i&&(i=e.valuetype),void 0===o&&(o=e.rowtype);var s=t.call(this,null)||this;return s.m=e,s.f=r,s.thisArgument=n,s.valuetype=i,s._idtype=o,s.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"vector",id:e.desc.id+"-p",size:s.dim[0],idtype:e.rowtype,value:s.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},s.root=s,s}return n.c(e,t),e.prototype.persist=function(){return{root:this.m.persist(),f:this.f.toString(),valuetype:this.valuetype===this.m.valuetype?void 0:this.valuetype,idtype:this.idtype===this.m.rowtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.f)(t.range))),e},Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.nrow},e.prototype.names=function(t){return this.m.rows(t)},e.prototype.ids=function(t){return this.m.rowIds(t)},e.prototype.at=function(t){return n.a(this,void 0,void 0,function(){var e;return n.b(this,function(n){switch(n.label){case 0:return[4,this.m.data(r.i(o.d)(t))];case 1:return e=n.sent(),[2,this.f.call(this.thisArgument,e[0])]}})})},e.prototype.data=function(t){return n.a(this,void 0,void 0,function(){return n.b(this,function(e){switch(e.label){case 0:return[4,this.m.data(t)];case 1:return[2,e.sent().map(this.f,this.thisArgument)]}})})},e.prototype.sort=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.l)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e.prototype.filter=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.m)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e}(s.a);e.a=u},334:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(288),s=r(305),u=function(t){function e(e,r){var n=t.call(this,null)||this;return n.m=e,n.col=r,n.colRange=o.e.from([n.col]),n.desc={name:e.desc.name+"-c"+r,fqname:e.desc.fqname+"-c"+r,id:e.desc.id+"-c"+r,type:"vector",idtype:e.rowtype,size:e.nrow,value:e.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},n.root=n,n}return n.c(e,t),e.prototype.persist=function(){return{root:this.m.persist(),col:this.col}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.f)(t.range))),e},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.m.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.m.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.nrow},e.prototype.names=function(t){return this.m.rows(t)},e.prototype.ids=function(t){return this.m.rowIds(t)},e.prototype.at=function(t){return this.m.at(t,this.col)},e.prototype.data=function(t){return void 0===t&&(t=r.i(o.c)()),n.a(this,void 0,void 0,function(){var e,i,s;return n.b(this,function(n){switch(n.label){case 0:return e=r.i(o.f)(t),i=r.i(o.d)(e.dim(0),this.colRange),[4,this.m.data(i)];case 1:return s=n.sent(),0===s.length?[2,[]]:Array.isArray(s[0])?[2,s.map(function(t){return t[0]})]:[2,s]}})})},e.prototype.sort=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.l)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e.prototype.filter=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.m)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e}(s.a);e.a=u},335:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(288),s=r(305),u=function(t){function e(e,r){var n=t.call(this,null)||this;return n.m=e,n.row=r,n.rowRange=o.e.from([n.row]),n.desc={name:e.desc.name+"-r"+r,fqname:e.desc.fqname+"-r"+r,id:e.desc.id+"-r"+r,type:"vector",idtype:e.coltype,size:e.ncol,value:e.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},n.root=n,n}return n.c(e,t),e.prototype.persist=function(){return{root:this.m.persist(),row:this.row}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.f)(t.range))),e},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.m.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.m.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.ncol},e.prototype.names=function(t){return this.m.cols(t)},e.prototype.ids=function(t){return this.m.colIds(t)},e.prototype.at=function(t){return this.m.at(this.row,t)},e.prototype.data=function(t){return void 0===t&&(t=r.i(o.c)()),n.a(this,void 0,void 0,function(){var e,i,s;return n.b(this,function(n){switch(n.label){case 0:return e=r.i(o.f)(t),i=r.i(o.d)(this.rowRange,e.dim(0)),[4,this.m.data(i)];case 1:return s=n.sent(),[2,s[0]]}})})},e.prototype.sort=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.l)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e.prototype.filter=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.m)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e}(s.a);e.a=u},336:function(t,e,r){"use strict";var n=r(8),i=r(288),o=r(289),s=r(323),u=r(335),a=function(t){function e(e){var r=t.call(this,e)||this;return r.t=e,r}return n.c(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),transposed:!0}},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowtype",{get:function(){return this.root.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coltype",{get:function(){return this.root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"producttype",{get:function(){return this.root.producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype,this.coltype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.c)()),n.a(this,void 0,void 0,function(){var e;return n.b(this,function(n){switch(n.label){case 0:return[4,this.t.ids(t?r.i(i.f)(t).swap():void 0)];case 1:return e=n.sent(),[2,e.swap()]}})})},e.prototype.cols=function(t){return void 0===t&&(t=r.i(i.c)()),this.t.rows(t?r.i(i.f)(t).swap():void 0)},e.prototype.colIds=function(t){return void 0===t&&(t=r.i(i.c)()),this.t.rowIds(t?r.i(i.f)(t).swap():void 0)},e.prototype.rows=function(t){return void 0===t&&(t=r.i(i.c)()),this.t.cols(t?r.i(i.f)(t).swap():void 0)},e.prototype.rowIds=function(t){return void 0===t&&(t=r.i(i.c)()),this.t.colIds(t?r.i(i.f)(t).swap():void 0)},e.prototype.view=function(t){void 0===t&&(t=r.i(i.c)());var e=r.i(i.f)(t);return e.isAll?this:new s.b(this.root,e.swap()).t},e.prototype.slice=function(t){return new u.a(this.root,t)},e.prototype.size=function(){var t=this.t.dim;return[t[1],t[0]]},e.prototype.at=function(t,e){return this.t.at(e,t)},e.prototype.data=function(t){return void 0===t&&(t=r.i(i.c)()),n.a(this,void 0,void 0,function(){var e;return n.b(this,function(n){switch(n.label){case 0:return e=o.j,[4,this.t.data(t?r.i(i.f)(t).swap():void 0)];case 1:return[2,e.apply(void 0,[n.sent()])]}})})},e.prototype.hist=function(t,e,n){return void 0===e&&(e=r.i(i.c)()),void 0===n&&(n=0),this.t.hist(t,e?r.i(i.f)(e).swap():void 0,1-n)},e.prototype.stats=function(t){return void 0===t&&(t=r.i(i.c)()),this.t.stats(t?r.i(i.f)(t).swap():void 0)},e.prototype.statsAdvanced=function(t){return void 0===t&&(t=r.i(i.c)()),this.t.statsAdvanced(t?r.i(i.f)(t).swap():void 0)},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=r.i(i.c)()),void 0===e&&(e={}),e.transpose=!0!==e.transpose,this.t.heatmapUrl(t?r.i(i.f)(t).swap():void 0,e)},e}(s.a);e.a=a},337:function(t,e,r){"use strict";function n(t){return{rowIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.rowIds,e.size)})},rows:function(e,r){return t(e).then(function(t){return r.dim(0).filter(t.rows,e.size[0])})},colIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.colIds,e.size)})},cols:function(e,r){return t(e).then(function(t){return r.dim(1).filter(t.cols,e.size[1])})},ids:function(e,r){return t(e).then(function(t){return r.preMultiply(t.ids,e.size)})},at:function(e,r,n){return t(e).then(function(t){return t.data[r][n]})},data:function(e,r){return t(e).then(function(t){return r.filter(t.data,e.size)})}}}function i(t){return t.value.type===a.g||t.value.type===a.f?function(e){return r.i(a.h)(e,t.value)}:function(t){return t}}function o(){var t=null,e=null,n=null,o=null,a=null,p=null,f=null,_={rowIds:function(e,n){return null==t&&(t=r.i(s.a)("/dataset/matrix/"+e.id+"/rowIds").then(u.f)),t.then(function(t){return t.preMultiply(n,e.size)})},rows:function(t,n){return null==e&&(e=r.i(s.a)("/dataset/matrix/"+t.id+"/rows")),e.then(function(e){return n.dim(0).filter(e,t.size[0])})},colIds:function(t,e){return null==n&&(n=r.i(s.a)("/dataset/matrix/"+t.id+"/colIds").then(u.f)),n.then(function(r){return r.preMultiply(e,t.size)})},cols:function(t,e){return null==o&&(o=r.i(s.a)("/dataset/matrix/"+t.id+"/cols")),o.then(function(r){return e.dim(1).filter(r,t.size[1])})},ids:function(t,e){if(1===e.ndim)return _.rowIds(t,e);e.dim(0),e.dim(1);var n=e.split();return Promise.all([_.rowIds(t,n[0]||r.i(u.c)()),_.colIds(t,n[1]||r.i(u.c)())]).then(u.h)},numericalStats:function(t,e){if(e.isAll)return null==f&&(f=r.i(s.a)("/dataset/matrix/"+t.id+"/stats")),f;var n={range:e.toString()};return r.i(s.a)("/dataset/matrix/"+t.id+"/stats",n)},numericalHist:function(t,e,n){void 0===n&&(n=NaN);var i=t.value.range;if(e.isAll)return null==p&&(p=r.i(s.a)("/dataset/matrix/"+t.id+"/hist").then(function(t){return r.i(c.g)(t,i)})),p;var o={range:e.toString()};return isNaN(n)||(o.bins=n),r.i(s.a)("/dataset/matrix/"+t.id+"/hist",o).then(function(t){return r.i(c.g)(t,i)})},at:function(t,e,n){return _.data(t,r.i(u.d)([e],[n])).then(function(e){return i(t)(e[0][0])})},data:function(t,e){if(e.isAll)return null==a&&(a=r.i(s.a)("/dataset/matrix/"+t.id+"/raw").then(i(t))),a;if(null!=a)return a.then(function(r){return e.filter(r,t.size)});var n=t.size;return n[0]*n[1]<1e3||t.loadAtOnce?(a=r.i(s.a)("/dataset/matrix/"+t.id+"/raw").then(i(t)),a.then(function(r){return e.filter(r,t.size)})):r.i(s.c)("/dataset/matrix/"+t.id+"/raw",{range:e.toString()}).then(i(t))},heatmapUrl:function(t,e,n){var i={format:n.format||"png",range:e.toString()};return!0===n.transpose&&(i.format_transpose=!0),n.range&&(i.format_min=n.range[0],i.format_max=n.range[1]),n.palette&&(i.format_palette=n.palette.toString()),n.missing&&(i.format_missing=n.missing),r.i(s.d)("/dataset/matrix/"+t.id+"/data",i)}};return _}var s=r(109),u=r(288),a=r(289),c=r(299);e.a=n,e.b=o},338:function(t,e,r){"use strict";function n(){return r.i(i.a)(r.i(o.b)(),{type:"stratification",idtype:"_rows",size:0,groups:[],ngroups:0})}var i=r(18),o=r(289);e.a=n},339:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(288),s=r(289),u=r(305),a=function(t){function e(e,r){var n=t.call(this,null)||this;n.strat=e,n.range=r,n._cache=null,n.root=n,n.valuetype={type:s.d,categories:r.groups.map(function(t){return{name:t.name,label:t.name,color:t.color}})};var i=e.desc;return n.desc={name:i.name,fqname:i.fqname,description:i.description,id:i.id+"-v",type:"vector",size:i.size,idtype:i.idtype,value:n.valuetype,creator:i.creator,ts:i.ts},n}return n.c(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.strat.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.strat.persist()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.f)(t.range))),e},e.prototype.load=function(){if(!this._cache){var t=[];this.range.groups.forEach(function(e){e.forEach(function(){return t.push(e.name)})}),this._cache=t}return this._cache},e.prototype.at=function(t){return Promise.resolve(this.load()[t])},e.prototype.data=function(t){void 0===t&&(t=r.i(o.c)());var e=this.load();return Promise.resolve(r.i(o.f)(t).filter(e,this.dim))},e.prototype.names=function(t){return void 0===t&&(t=r.i(o.c)()),this.strat.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(o.c)()),this.strat.ids(t)},e.prototype.size=function(){return this.strat.size()},e.prototype.sort=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.l)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e.prototype.filter=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.m)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e}(u.a);e.a=a},340:function(t,e,r){"use strict";function n(t,e){return r.i(u.j)(t,e.map(function(t){return new u.i(t.name,t.color||"gray",r.i(u.f)(t.range).dim(0))}))}function i(){var t=void 0;return function(e){return t||(t=r.i(s.a)("/dataset/"+e.id).then(function(t){return{rowIds:r.i(u.f)(t.rowIds),rows:t.rows,range:n(e.name,t.groups)}})),t}}function o(t,e,n){var i=void 0;return function(){return i||(i=Promise.resolve({rowIds:r.i(u.d)(e),rows:t,range:n})),i}}var s=r(109),u=r(288);e.a=i,e.b=o},341:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(288),__WEBPACK_IMPORTED_MODULE_2__idtype__=__webpack_require__(291),__WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__=__webpack_require__(343),ATable=function(_super){function ATable(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(ATable,_super),Object.defineProperty(ATable.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),ATable.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),new TableView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t))},ATable.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.a(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,function(r){switch(r.label){case 0:return e=this.view,[4,this.ids()];case 1:return[2,e.apply(this,[r.sent().indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t))])]}})})},ATable.prototype.reduce=function(t,e,r,n){return new __WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__.a(this.root,t,e,r,n)},ATable.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__idtype__.f)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(persisted.range)):this},ATable}(__WEBPACK_IMPORTED_MODULE_2__idtype__.e);__webpack_exports__.a=ATable;var TableView=function(t){function e(e,r){var n=t.call(this,e)||this;return n.range=r,n.range=r,n.vectors=n.root.cols(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.d)(r.dim(1))).map(function(t){return t.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.d)(r.dim(0)))}),n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t.range))),e},e.prototype.size=function(){return this.range.size(this.root.dim)},e.prototype.at=function(t,e){var r=this.range.invert([t,e],this.root.dim);return this.root.at(r[0],r[1])},e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t).filter(this.vectors,[this.ncol])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.colData=function(t,e){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)());var r=this.range.dim(0).preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(e).dim(0),this.root.dim[0]);return this.root.dataOfColumn(t,new __WEBPACK_IMPORTED_MODULE_1__range__.l([r]))},e.prototype.objects=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.objects(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.rows(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.root.rowIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)()),this.rowIds(t)},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.f)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.queryView=function(t,e){throw new Error("not implemented")},e}(ATable)},342:function(t,e,r){"use strict";function n(){return r.i(i.a)(r.i(o.b)(),{type:"table",idtype:"_rows",columns:[],size:[0,0]})}var i=r(18),o=r(289);e.a=n},343:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(288),s=r(305),u=function(t){function e(e,n,o,s,u){void 0===o&&(o=e),void 0===s&&(s=null),void 0===u&&(u=e.idtype);var a=t.call(this,null)||this;return a.table=e,a.f=n,a.thisArgument=o,a.valuetype=s,a._idtype=u,a.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",description:n.toString(),type:"vector",id:r.i(i.j)(e.desc.id+"-p"+n.toString()),idtype:e.desc.idtype,size:e.nrow,value:s,creator:e.desc.creator,ts:Date.now()},a.root=a,a}return n.c(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),f:this.f.toString(),valuetype:this.valuetype?this.valuetype:void 0,idtype:this.idtype===this.table.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.f)(t.range))),e},e.prototype.size=function(){return this.table.nrow},e.prototype.names=function(t){return this.table.rows(t)},e.prototype.ids=function(t){return this.table.rowIds(t)},e.prototype.at=function(t){return n.a(this,void 0,void 0,function(){var e,i,s;return n.b(this,function(n){switch(n.label){case 0:return i=(e=this.f).call,s=[this.thisArgument],[4,this.table.data(r.i(o.d)(t))];case 1:return[2,i.apply(e,s.concat([n.sent()[0]]))]}})})},e.prototype.data=function(t){return n.a(this,void 0,void 0,function(){return n.b(this,function(e){switch(e.label){case 0:return[4,this.table.data(t)];case 1:return[2,e.sent().map(this.f,this.thisArgument)]}})})},e.prototype.sort=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.l)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e.prototype.filter=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.m)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e}(s.a);e.a=u},344:function(t,e,r){"use strict";var n=r(8),i=r(18),o=r(288),s=r(305),u=function(t){function e(e,r,n){var i=t.call(this,null)||this;return i.table=e,i.index=r,i.column=n.column,i.root=i,i.desc={type:"vector",id:e.desc.id+"_"+n.name,name:n.name,description:n.description||"",fqname:e.desc.fqname+"/"+n.name,idtype:e.idtype.id,size:e.nrow,value:n.value,creator:e.desc.creator,ts:e.desc.ts},i}return n.c(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.table.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),col:this.index}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.f)(t.range))),e},e.prototype.at=function(t){return this.table.at(t,this.index)},e.prototype.data=function(t){return void 0===t&&(t=r.i(o.c)()),this.table.colData(this.column,t)},e.prototype.names=function(t){return void 0===t&&(t=r.i(o.c)()),this.table.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(o.c)()),this.table.rowIds(t)},e.prototype.size=function(){return this.table.nrow},e.prototype.sort=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.l)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e.prototype.filter=function(t,e){return n.a(this,void 0,void 0,function(){var s,u;return n.b(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return s=n.sent(),u=r.i(i.m)(s,t,e),[2,this.view(r.i(o.d)(u))]}})})},e}(s.a);e.a=u},345:function(t,e,r){"use strict";function n(t,e,r){if(e.isAll)return t;if(t=e.dim(0).filter(t,r.size[0]),e.ndim>1&&!e.dim(1).isAll){var n=e.dim(1).filter(r.columns,r.columns.length),i=n.map(function(t){return t.column||t.name});return t.map(function(t){var e={};return i.forEach(function(r){return e[r]=t[r]}),e})}return t}function i(t){return{rowIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.rowIds,e.size)})},rows:function(e,r){return t(e).then(function(t){return r.dim(0).filter(t.rows,e.size[0])})},col:function(e,r,n){return t(e).then(function(t){return n.filter(t.objs.map(function(t){return t[r]}),e.size)})},objs:function(e,r){return t(e).then(function(t){return n(t.objs,r,e)})},data:function(e,r){return t(e).then(function(t){return r.filter(c(t.objs,e.columns),e.size)})},view:function(t,e,r){throw new Error("not implemented")}}}function o(t,e){var n=void 0;return function(i){return n||(n=r.i(f.a)("/dataset/table/"+i.id+"/view/"+t,e).then(function(t){return t.rowIds=r.i(_.f)(t.rowIds),t.objs=u(t.data,i),t})),n}}function s(t,e){return!e.value||e.value.type!==l.g&&e.value.type!==l.f?t:r.i(l.h)(t,e.value)}function u(t,e){var n=e.columns.filter(function(t){return t.value&&(t.value.type===l.g||t.value.type===l.f)});return n.length>0&&t.forEach(function(t){n.forEach(function(e){return t[e.name]=r.i(l.h)(t[e.name],e.value)})}),t}function a(){var t={},e=null,i=null,a=null,p=null,l={rowIds:function(t,n){return null==e&&(e=r.i(f.a)("/dataset/table/"+t.id+"/rowIds").then(_.f)),e.then(function(e){return e.preMultiply(n,t.size)})},rows:function(t,e){return null==i&&(i=r.i(f.a)("/dataset/table/"+t.id+"/rows")),i.then(function(r){return e.dim(0).filter(r,t.size[0])})},objs:function(t,e){return e.isAll?(null==a&&(a=r.i(f.a)("/dataset/table/"+t.id+"/raw").then(function(e){return u(e,t)})),a):null!=a?a.then(function(r){return e.filter(r,t.size)}):r.i(f.c)("/dataset/table/"+t.id+"/raw",{range:e.toString()}).then(function(e){return u(e,t)})},data:function(t,e){return e.isAll?(null==p&&(p=l.objs(t,e).then(function(e){return c(e,t.columns)})),p):null!=p?p.then(function(r){return e.filter(r,t.size)}):l.objs(t,e).then(function(e){return c(e,t.columns)})},col:function(e,i,o){var u=e.columns.find(function(t){return t.column===i||t.name===i});return o.isAll?(null==t[i]&&(t[i]=null===a?r.i(f.a)("/dataset/table/"+e.id+"/col/"+i).then(function(t){return s(t,u)}):a.then(function(t){return t.map(function(t){return t[i]})})),t[i]):null!=t[i]?t[i].then(function(t){return n(t,o,e)}):r.i(f.c)("/dataset/table/"+e.id+"/col/"+i,{range:o.toString()}).then(function(t){return s(t,u)})},view:function(t,e,r){return o(e,r)}};return l}function c(t,e){return t.map(function(t){return e.map(function(e){return t[e.column]})})}function p(t,e){var n=void 0;return function(i){function o(t){return t.getter?t.getter:function(e){return e[t.column]}}if(n)return Promise.resolve(n);var s="function"==typeof e?e:function(t){return t[e.toString()]},u=i.columns.map(o),a=t.map(function(t){var e={_:t};return i.columns.forEach(function(r,n){e[r.column]=u[n](t)}),e}),c=t.map(s);return n={rowIds:i.rowassigner?i.rowassigner.map(c):r.i(_.k)(0,t.length),rows:c,objs:a,data:u.map(function(e){return t.map(e)})},Promise.resolve(n)}}var f=r(109),_=r(288),l=r(289);e.a=i,e.b=a,e.c=p},346:function(t,e,r){"use strict";function n(){return r.i(i.a)(r.i(o.b)(),{type:"vector",idtype:"_rows",size:0,value:{type:"string"}})}var i=r(18),o=r(289);e.a=n},347:function(t,e,r){"use strict";var n=r(8),i=r(288),o=r(291),s=function(t){function e(e,r,n,i,o){void 0===n&&(n=e),void 0===i&&(i=e.valuetype),void 0===o&&(o=e.idtype);var s=t.call(this)||this;return s.v=e,s.f=r,s.thisArgument=n,s.valuetype=i,s._idtype=o,s.cache=null,s.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"atom",id:e.desc.id+"-p",idtype:e.idtype,value:s.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},s}return n.c(e,t),e.prototype.load=function(){var t=this;return null===this.cache&&(this.cache=Promise.all([this.v.data(),this.v.ids(),this.v.names()]).then(function(e){return t.f.apply(t.thisArgument,e)})),this.cache},e.prototype.id=function(){return n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,r.i(i.d)(t.id)]}})})},e.prototype.name=function(){return n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.name]}})})},e.prototype.data=function(){return n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.value]}})})},Object.defineProperty(e.prototype,"dim",{get:function(){return[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.c)()),t=r.i(i.f)(t),t.isNone?Promise.resolve(r.i(i.g)()):this.id()},e.prototype.idView=function(t){return Promise.resolve(this)},e.prototype.persist=function(){return{root:this.v.persist(),f:this.f.toString(),valuetype:this.valuetype===this.v.valuetype?void 0:this.valuetype,idtype:this.idtype===this.v.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){return this},e}(o.e);e.a=s},348:function(t,e,r){"use strict";var n=r(8),i=r(288),o=r(289),s=r(299),u=r(324),a=function(t){function e(e,r){var n=t.call(this,{id:e.desc.id+"-s",name:e.desc.name,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts,fqname:e.desc.fqname,type:"stratification",idtype:e.idtype.id,size:e.length,ngroups:r.groups.length,groups:r.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}})})||this;return n.v=e,n.r=r,n}return n.c(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.v.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new u.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(i.c)()),n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return t=s.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.resolve(this.v)},e.prototype.origin=function(){return this.asVector()},e.prototype.range=function(){return Promise.resolve(this.r)},e.prototype.idRange=function(){return n.a(this,void 0,void 0,function(){var t;return n.b(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return t=e.sent(),[2,t.dim(0).preMultiply(this.r,this.dim[0])]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(i.c)()),this.v.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.c)()),this.v.ids(t)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.size()]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.v.persist(),asstrat:!0}},e}(o.c);e.a=a},349:function(t,e,r){"use strict";function n(){var t=void 0;return function(e){return t||(t=r.i(o.a)("/dataset/"+e.id).then(function(t){return t.rowIds=r.i(s.f)(t.rowIds),t.data=r.i(u.h)(t.data,e.value),t}))}}function i(t,e,n){var i=void 0;return function(){return i?Promise.resolve(i):(i={rowIds:r.i(s.f)(e),rows:t,data:n},Promise.resolve(i))}}var o=r(109),s=r(288),u=r(289);e.a=n,e.b=i}});